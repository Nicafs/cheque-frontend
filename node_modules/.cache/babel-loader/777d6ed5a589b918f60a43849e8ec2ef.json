{"ast":null,"code":"var _jsxFileName = \"/home/geia/git/cheque/src/components/table/EnchancedTable.js\";\nimport React from 'react';\nimport MaUTable from '@material-ui/core/Table';\nimport PropTypes from 'prop-types';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableFooter from '@material-ui/core/TableFooter';\nimport TableHead from '@material-ui/core/TableHead';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TablePaginationActions from './TablePaginationActions';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport TableToolbar from './TableToolbar';\nimport { useGlobalFilter, usePagination, useRowSelect, useSortBy, useTable } from 'react-table';\nconst inputStyle = {\n  padding: 0,\n  margin: 0,\n  border: 0,\n  background: 'transparent'\n}; // Create an editable cell renderer\n\nconst EditableCell = ({\n  value: initialValue,\n  row: {\n    index\n  },\n  column: {\n    id\n  },\n  updateMyData // This is a custom function that we supplied to our table instance\n\n}) => {\n  // We need to keep and update the state of the cell normally\n  const [value, setValue] = React.useState(initialValue);\n\n  const onChange = e => {\n    setValue(e.target.value);\n  }; // We'll only update the external data when the input is blurred\n\n\n  const onBlur = () => {\n    updateMyData(index, id, value);\n  }; // If the initialValue is changed externall, sync it up with our state\n\n\n  React.useEffect(() => {\n    setValue(initialValue);\n  }, [initialValue]);\n  return /*#__PURE__*/React.createElement(\"input\", {\n    style: inputStyle,\n    value: value,\n    onChange: onChange,\n    onBlur: onBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  });\n};\n\nEditableCell.propTypes = {\n  cell: PropTypes.shape({\n    value: PropTypes.any.isRequired\n  }),\n  row: PropTypes.shape({\n    index: PropTypes.number.isRequired\n  }),\n  column: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  updateMyData: PropTypes.func.isRequired\n}; // Set our editable cell renderer as the default Cell renderer\n\nconst defaultColumn = {\n  Cell: EditableCell\n};\n\nconst EnhancedTable = ({\n  columns,\n  data,\n  setData,\n  updateMyData,\n  skipPageReset\n}) => {\n  const {\n    getTableProps,\n    headerGroups,\n    prepareRow,\n    page,\n    gotoPage,\n    setPageSize,\n    preGlobalFilteredRows,\n    setGlobalFilter,\n    state: {\n      pageIndex,\n      pageSize,\n      selectedRowIds,\n      globalFilter\n    }\n  } = useTable({\n    columns,\n    data,\n    defaultColumn,\n    autoResetPage: !skipPageReset,\n    // updateMyData isn't part of the API, but\n    // anything we put into these options will\n    // automatically be available on the instance.\n    // That way we can call this function from our\n    // cell renderer!\n    updateMyData\n  }, useGlobalFilter, useSortBy, usePagination, useRowSelect, hooks => {\n    hooks.allColumns.push(columns => [// Let's make a column for selection\n    {\n      id: 'selection',\n      // The header can use the table's getToggleAllRowsSelectedProps method\n      // to render a checkbox.  Pagination is a problem since this will select all\n      // rows even though not all rows are on the current page.  The solution should\n      // be server side pagination.  For one, the clients should not download all\n      // rows in most cases.  The client should only download data for the current page.\n      // In that case, getToggleAllRowsSelectedProps works fine.\n      Header: ({\n        getToggleAllRowsSelectedProps\n      }) => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", Object.assign({}, getToggleAllRowsSelectedProps(), {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 15\n        }\n      }))),\n      // The cell can use the individual row's getToggleRowSelectedProps method\n      // to the render a checkbox\n      Cell: ({\n        row\n      }) => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", Object.assign({}, row.getToggleRowSelectedProps(), {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 15\n        }\n      })))\n    }, ...columns]);\n  });\n\n  const handleChangePage = (event, newPage) => {\n    gotoPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setPageSize(Number(event.target.value));\n  };\n\n  const removeByIndexs = (array, indexs) => array.filter((_, i) => !indexs.includes(i));\n\n  const deleteUserHandler = event => {\n    const newData = removeByIndexs(data, Object.keys(selectedRowIds).map(x => parseInt(x, 10)));\n    setData(newData);\n  };\n\n  const addUserHandler = user => {\n    const newData = data.concat([user]);\n    setData(newData);\n  };\n\n  console.log(useTable({\n    columns,\n    data,\n    defaultColumn,\n    autoResetPage: !skipPageReset,\n    // updateMyData isn't part of the API, but\n    // anything we put into these options will\n    // automatically be available on the instance.\n    // That way we can call this function from our\n    // cell renderer!\n    updateMyData\n  }, useGlobalFilter, useSortBy, usePagination, useRowSelect)); // Render the UI for your table\n\n  return /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TableToolbar, {\n    numSelected: Object.keys(selectedRowIds).length,\n    deleteUserHandler: deleteUserHandler,\n    addUserHandler: addUserHandler,\n    preGlobalFilteredRows: preGlobalFilteredRows,\n    setGlobalFilter: setGlobalFilter,\n    globalFilter: globalFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(MaUTable, Object.assign({}, getTableProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }, headerGroups.map(headerGroup => /*#__PURE__*/React.createElement(TableRow, Object.assign({}, headerGroup.getHeaderGroupProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }), headerGroup.headers.map(column => /*#__PURE__*/React.createElement(TableCell, Object.assign({}, column.id === 'selection' ? column.getHeaderProps() : column.getHeaderProps(column.getSortByToggleProps()), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }), column.render('Header'), column.id !== 'selection' ? /*#__PURE__*/React.createElement(TableSortLabel, {\n    active: column.isSorted // react-table has a unsorted state which is not treated here\n    ,\n    direction: column.isSortedDesc ? 'desc' : 'asc',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }) : null))))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }\n  }, page.map((row, i) => {\n    prepareRow(row);\n    return /*#__PURE__*/React.createElement(TableRow, Object.assign({}, row.getRowProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 15\n      }\n    }), row.cells.map(cell => {\n      return /*#__PURE__*/React.createElement(TableCell, Object.assign({}, cell.getCellProps(), {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }\n      }), cell.render('Cell'));\n    }));\n  })), /*#__PURE__*/React.createElement(TableFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TablePagination, {\n    rowsPerPageOptions: [5, 10, 25, {\n      label: 'All',\n      value: data.length\n    }],\n    colSpan: 3,\n    count: data.length,\n    rowsPerPage: pageSize,\n    page: pageIndex,\n    SelectProps: {\n      inputProps: {\n        'aria-label': 'rows per page'\n      },\n      native: true\n    },\n    onChangePage: handleChangePage,\n    onChangeRowsPerPage: handleChangeRowsPerPage,\n    ActionsComponent: TablePaginationActions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  })))));\n};\n\nEnhancedTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  data: PropTypes.array.isRequired,\n  updateMyData: PropTypes.func.isRequired,\n  setData: PropTypes.func.isRequired,\n  skipPageReset: PropTypes.bool.isRequired\n};\nexport default EnhancedTable;","map":{"version":3,"sources":["/home/geia/git/cheque/src/components/table/EnchancedTable.js"],"names":["React","MaUTable","PropTypes","TableBody","TableCell","TableContainer","TableFooter","TableHead","TablePagination","TablePaginationActions","TableRow","TableSortLabel","TableToolbar","useGlobalFilter","usePagination","useRowSelect","useSortBy","useTable","inputStyle","padding","margin","border","background","EditableCell","value","initialValue","row","index","column","id","updateMyData","setValue","useState","onChange","e","target","onBlur","useEffect","propTypes","cell","shape","any","isRequired","number","string","func","defaultColumn","Cell","EnhancedTable","columns","data","setData","skipPageReset","getTableProps","headerGroups","prepareRow","page","gotoPage","setPageSize","preGlobalFilteredRows","setGlobalFilter","state","pageIndex","pageSize","selectedRowIds","globalFilter","autoResetPage","hooks","allColumns","push","Header","getToggleAllRowsSelectedProps","getToggleRowSelectedProps","handleChangePage","event","newPage","handleChangeRowsPerPage","Number","removeByIndexs","array","indexs","filter","_","i","includes","deleteUserHandler","newData","Object","keys","map","x","parseInt","addUserHandler","user","concat","console","log","length","headerGroup","getHeaderGroupProps","headers","getHeaderProps","getSortByToggleProps","render","isSorted","isSortedDesc","getRowProps","cells","getCellProps","label","inputProps","native","bool"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport MaUTable from '@material-ui/core/Table'\nimport PropTypes from 'prop-types'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableContainer from '@material-ui/core/TableContainer'\nimport TableFooter from '@material-ui/core/TableFooter'\nimport TableHead from '@material-ui/core/TableHead'\nimport TablePagination from '@material-ui/core/TablePagination'\nimport TablePaginationActions from './TablePaginationActions'\nimport TableRow from '@material-ui/core/TableRow'\nimport TableSortLabel from '@material-ui/core/TableSortLabel'\nimport TableToolbar from './TableToolbar'\nimport {\n  useGlobalFilter,\n  usePagination,\n  useRowSelect,\n  useSortBy,\n  useTable,\n} from 'react-table'\n\nconst inputStyle = {\n  padding: 0,\n  margin: 0,\n  border: 0,\n  background: 'transparent',\n}\n\n// Create an editable cell renderer\nconst EditableCell = ({\n  value: initialValue,\n  row: { index },\n  column: { id },\n  updateMyData, // This is a custom function that we supplied to our table instance\n}) => {\n  // We need to keep and update the state of the cell normally\n  const [value, setValue] = React.useState(initialValue)\n\n  const onChange = e => {\n    setValue(e.target.value)\n  }\n\n  // We'll only update the external data when the input is blurred\n  const onBlur = () => {\n    updateMyData(index, id, value)\n  }\n\n  // If the initialValue is changed externall, sync it up with our state\n  React.useEffect(() => {\n    setValue(initialValue)\n  }, [initialValue])\n\n  return (\n    <input\n      style={inputStyle}\n      value={value}\n      onChange={onChange}\n      onBlur={onBlur}\n    />\n  )\n}\n\nEditableCell.propTypes = {\n  cell: PropTypes.shape({\n    value: PropTypes.any.isRequired,\n  }),\n  row: PropTypes.shape({\n    index: PropTypes.number.isRequired,\n  }),\n  column: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n  }),\n  updateMyData: PropTypes.func.isRequired,\n}\n\n// Set our editable cell renderer as the default Cell renderer\nconst defaultColumn = {\n  Cell: EditableCell,\n}\n\nconst EnhancedTable = ({\n  columns,\n  data,\n  setData,\n  updateMyData,\n  skipPageReset,\n}) => {\n  const {\n    getTableProps,\n    headerGroups,\n    prepareRow,\n    page,\n    gotoPage,\n    setPageSize,\n    preGlobalFilteredRows,\n    setGlobalFilter,\n    state: { pageIndex, pageSize, selectedRowIds, globalFilter },\n  } = useTable(\n    {\n      columns,\n      data,\n      defaultColumn,\n      autoResetPage: !skipPageReset,\n      // updateMyData isn't part of the API, but\n      // anything we put into these options will\n      // automatically be available on the instance.\n      // That way we can call this function from our\n      // cell renderer!\n      updateMyData,\n    },\n    useGlobalFilter,\n    useSortBy,\n    usePagination,\n    useRowSelect,\n    hooks => {\n      hooks.allColumns.push(columns => [\n        // Let's make a column for selection\n        {\n          id: 'selection',\n          // The header can use the table's getToggleAllRowsSelectedProps method\n          // to render a checkbox.  Pagination is a problem since this will select all\n          // rows even though not all rows are on the current page.  The solution should\n          // be server side pagination.  For one, the clients should not download all\n          // rows in most cases.  The client should only download data for the current page.\n          // In that case, getToggleAllRowsSelectedProps works fine.\n          Header: ({ getToggleAllRowsSelectedProps }) => (\n            <div>\n              <div {...getToggleAllRowsSelectedProps()} />\n            </div>\n          ),\n          // The cell can use the individual row's getToggleRowSelectedProps method\n          // to the render a checkbox\n          Cell: ({ row }) => (\n            <div>\n              <div {...row.getToggleRowSelectedProps()} />\n            </div>\n          ),\n        },\n        ...columns,\n      ])\n    }\n  )\n\n  const handleChangePage = (event, newPage) => {\n    gotoPage(newPage)\n  }\n\n  const handleChangeRowsPerPage = event => {\n    setPageSize(Number(event.target.value))\n  }\n\n  const removeByIndexs = (array, indexs) =>\n    array.filter((_, i) => !indexs.includes(i))\n\n  const deleteUserHandler = event => {\n    const newData = removeByIndexs(\n      data,\n      Object.keys(selectedRowIds).map(x => parseInt(x, 10))\n    )\n    setData(newData)\n  }\n\n  const addUserHandler = user => {\n    const newData = data.concat([user])\n    setData(newData)\n  }\n\n  console.log(useTable(\n    {\n      columns,\n      data,\n      defaultColumn,\n      autoResetPage: !skipPageReset,\n      // updateMyData isn't part of the API, but\n      // anything we put into these options will\n      // automatically be available on the instance.\n      // That way we can call this function from our\n      // cell renderer!\n      updateMyData,\n    },\n    useGlobalFilter,\n    useSortBy,\n    usePagination,\n    useRowSelect\n  )\n  );\n\n  // Render the UI for your table\n  return (\n    <TableContainer>\n    <TableToolbar\n      numSelected={Object.keys(selectedRowIds).length}\n      deleteUserHandler={deleteUserHandler}\n      addUserHandler={addUserHandler}\n      preGlobalFilteredRows={preGlobalFilteredRows}\n      setGlobalFilter={setGlobalFilter}\n      globalFilter={globalFilter}\n    />\n      <MaUTable {...getTableProps()}>\n        <TableHead>\n          {headerGroups.map(headerGroup => (\n            <TableRow {...headerGroup.getHeaderGroupProps()}>\n              {headerGroup.headers.map(column => (\n                <TableCell\n                  {...(column.id === 'selection'\n                    ? column.getHeaderProps()\n                    : column.getHeaderProps(column.getSortByToggleProps()))}\n                >\n                  {column.render('Header')}\n                  {column.id !== 'selection' ? (\n                    <TableSortLabel\n                      active={column.isSorted}\n                      // react-table has a unsorted state which is not treated here\n                      direction={column.isSortedDesc ? 'desc' : 'asc'}\n                    />\n                  ) : null}\n                </TableCell>\n              ))}\n            </TableRow>\n          ))}\n        </TableHead>\n        <TableBody>\n          {page.map((row, i) => {\n            prepareRow(row)\n            return (\n              <TableRow {...row.getRowProps()}>\n                {row.cells.map(cell => {\n                  return (\n                    <TableCell {...cell.getCellProps()}>\n                      {cell.render('Cell')}\n                    </TableCell>\n                  )\n                })}\n              </TableRow>\n            )\n          })}\n        </TableBody>\n\n        <TableFooter>\n          <TableRow>\n            <TablePagination\n              rowsPerPageOptions={[\n                5,\n                10,\n                25,\n                { label: 'All', value: data.length },\n              ]}\n              colSpan={3}\n              count={data.length}\n              rowsPerPage={pageSize}\n              page={pageIndex}\n              SelectProps={{\n                inputProps: { 'aria-label': 'rows per page' },\n                native: true,\n              }}\n              onChangePage={handleChangePage}\n              onChangeRowsPerPage={handleChangeRowsPerPage}\n              ActionsComponent={TablePaginationActions}\n            />\n          </TableRow>\n        </TableFooter>\n      </MaUTable>\n    </TableContainer>\n  )\n}\n\nEnhancedTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  data: PropTypes.array.isRequired,\n  updateMyData: PropTypes.func.isRequired,\n  setData: PropTypes.func.isRequired,\n  skipPageReset: PropTypes.bool.isRequired,\n}\n\nexport default EnhancedTable\n"]},"metadata":{},"sourceType":"module"}